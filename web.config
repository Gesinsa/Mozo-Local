<?xml version="1.0" encoding="UTF-8"?>
<configuration>
	<system.webServer>
			<!-- <add name="WebDAVModule" lockItem="true"/> -->
		<modules runAllManageModulesForAllRequests="false">
			<remove name="WebDAVModule"/>
		</modules>
		<handlers>
			<remove name="WebDAV" />
			<remove name="php-7.3.13"/>
			<remove name="ExtensionlessUrlHandler-Integrated-4.0"/>
			<remove name="StaticFile"/>
			<add name="WebDAV" path="*" verb="DELETE,PUT" modules="WebDAVModule" resourceType="Unspecified" requireAccess="Write" />
			<add name="php-7.3.13" path="*.php" verb="GET,HEAD,POST,PUT,DELETE" modules="FastCgiModule" scriptProcessor="C:\Program Files (x86)\PHP\v7.3\php-cgi.exe" resourceType="Either" requireAccess="Script" />
			<add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" responseBufferLimit="0" />
			<add name="StaticFile" path="*" verb="*" modules="StaticFileModule,DefaultDocumentModule,DirectoryListingModule" resourceType="Either" requireAccess="Script" />
		</handlers>
		<webdav>
			<authoring enabled="true" />
		</webdav>

		<rewrite>
			<rules>
				<rule name="Regla 2 importada" stopProcessing="true">
					<match url="^([^/]+)/?" ignoreCase="false" />
					<conditions logicalGrouping="MatchAll">
						<add input="{REQUEST_FILENAME}" matchType="IsFile" ignoreCase="false" negate="true" />
						<add input="{REQUEST_FILENAME}" matchType="IsDirectory" ignoreCase="false" negate="true" />
					</conditions>
					<action type="Rewrite" url="index.php?url={R:1}" appendQueryString="true" />
				</rule>
			</rules>

			<rewriteMaps>
				<rewriteMap name="StaticRewrites">
				</rewriteMap>
			</rewriteMaps>

		</rewrite>
		<security>
			<requestFiltering>
				<verbs>
					<clear />
					<add verb="PUT" allowed="true" />
					<add verb="DELETE" allowed="true" />
				</verbs>
			</requestFiltering>

			<authorization>
				<remove users="*" roles="" verbs="" />
				<add accessType="Allow" users="*"  verbs="GET,HEAD,POST,PUT,DELETE"/>
			</authorization>
		</security>
		<httpRedirect enabled="false" destination="" exactDestination="true" />

		<httpProtocol>
			<customHeaders>
				<add name="Access-Control-Allow-Origin" value="*" />
				<add name="Access-Control-Allow-Credentials" value="true" />
				<add name="Access-Control-Allow-Headers" value="Origin, X-Requested-With, Content-Type, Accept, X-Token" />
				<add name="Access-Control-Allow-Methods" value="GET, POST, PUT, DELETE" />
			</customHeaders>
		</httpProtocol>
	</system.webServer>
	<system.web>
		<customErrors mode="On" />
	</system.web>
</configuration>